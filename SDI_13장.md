## 요구사항
- 자동완성시 영어 기준으로 Prefix 매칭방식으로 구현한다.
- 최대 5건의 결과를 노출한다.
- 맞춤법 검사나 교정기능은 제공하지 않는다.
- DAU 기준으로 천만건을 질의한다.
- [중요] 자주 검색된 단어에 우선순위를 부어하여 노출한다.

## 요구사항 조정
- 실시간 검색을 누적하여 색인데이터를 생성하는 방식은 지양한다.
- Log 데이터가 존재하고 있고 이 데이터를 주기적으로 색인하여 미리 색인데이터를 생성한다.
- 자동완성 질의는 이미 생성된 색인데이터를 바탕으로 이루어진다.
- 자주 검색된 단어는 가중치를 부여하여 좀더 상위에 랭크되게 조절한다.

## 구현
- 직접 구현하는 트라이 자료구조를 버리고 elasticsearch를 이용한다.
- 수집시 모든 텍스트는 형태소분석기에 의해 품사 형태로로 분리되고 적절한 품사(명사, 대명사, 동사)만 Term 형태로 색인된다.
- 저장된 Term은 색인데이터 기준의 빈도수에 의해 정확도순으로 검색되고 score를 계산하여 랭킹된다. (TF-IDF, BM25)
- 기본적으로 정확도순으로 검색결과를 제공하고 동률을 가지는 단어(복합명사, 연관명사)가 검색결과로 존재할 경우 자주 검색된 단어를 가중치 계산하여 순서를 조절한다.   
- 고객이 실제 검색한 검색로그는 별도의 저장소(mongoDB)에 저장하고 검색빈도를 카운트로 관리한다. (카운트는 증가만 가능)
- 결과로 5건을 제공하기 위해 정확도순으로 100건을 기본적으로 조회한다. (제공 데이터의 20배)
- 100건의 결과 score를 검색빈도 카운트를 이용하여 특정 공식에 의해 재계산한다.
- 재계산된 순서에 의해 5건을 필터링하여 UI로 제공한다.
 

